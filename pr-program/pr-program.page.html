<ion-header>
  <app-toolbar
  [page]="this"
  [ShowDelete]="ShowDelete"
  [ShowSubmit]="ShowSubmit"
  [ShowApprove]="ShowApprove"
  [ShowDisapprove]="ShowDisapprove"
>
</app-toolbar>
 
</ion-header>

<ion-content appScrollbarTheme class="header-table">
  <!-- <app-page-message [itemsLength]="items.length" [showSpinner]="pageConfig.showSpinner"></app-page-message> -->
  <!-- <div *ngIf="items.length && pageConfig.showSpinner==false">
    <section class="table">
      <div
        *ngFor="let i of items; let j = index;"
        class="row"
        [ngClass]="{odd: j % 2 != 0}"
        [ngClass]="{selected: i.checked}"
      >
        <div class="col-checkbox cell">
          <input (click)="changeSelection(i, $event)" class="c-checkbox" [(ngModel)]="i.checked" type="checkbox" />
        </div>
        <div (click)="nav('pr-program/'+i.Id,'forward')" class="col-id cell">{{i.Id}}</div>
        <div (click)="nav('pr-program/'+i.Id,'forward')" class="col-name cell">{{i.Name}}</div>
        <div (click)="nav('pr-program/'+i.Id,'forward')" class="col-date cell">
          {{i.FromDate | date: 'dd/MM/yyyy'}} -> {{i.ToDate | date: 'dd/MM/yyyy'}}
        </div>
        <div (click)="nav('pr-program/'+i.Id,'forward')" class="col-status cell">{{i.Status}}</div>
      </div>
    </section>
  </div> -->

  <app-data-table
  style="width: fit-content; min-width: calc(100% - 32px)"
  class="box-shadow responsive"
  [rows]="items"
  [trackBy]="'Id'"
  [(selectedRows)]="selectedItems"
  [showSpinner]="pageConfig.showSpinner"
  [showFilter]="pageConfig.isShowSearch"
  [(query)]="query"
  (dataInfinite)="loadData($event)"
  (filter)="onDatatableFilter($event)"
  (sort)="onSort($event)"
  (selectedRowsChange)="changeSelection($event)"
>
  <datatable-column class="col-checkbox cell" [checkbox]="true"> </datatable-column>
  <datatable-column class="col-id cell" name="#" property="Id">
    <ng-template datatable-header-template>
      <div class="col-id cell" (click)="sortToggle('Id')">
        {{'Id' | translate}}
        <ion-icon class="min-btn" *ngIf="sort.Id" [name]="sort.Id == 'Id'?'arrow-down': 'arrow-up'"></ion-icon>
        <ion-icon
          class="min-btn"
          (click)="pageConfig.isShowSearch = !pageConfig.isShowSearch"
          *ngIf="query.Id"
          name="search"
          color="primary"
        ></ion-icon>
      </div>
    </ng-template>
    <ng-template let-i="row" datatable-cell-template>
      <div  (click)="nav('pr-program/'+i.Id,'forward')" class="col-id cell">{{i.Id}}</div>
    </ng-template>
  </datatable-column>

  <datatable-column class="col-name cell" name="Program name" property="Name">
    <ng-template let-i="row" datatable-cell-template>
      <div (click)="nav('pr-program/'+i.Id,'forward')" class="col-name cell">{{i.Name}}</div>
    </ng-template>
  </datatable-column>

  <datatable-column class="col-date cell"  name="Time application" property="FromDate">
    <ng-template datatable-filter-template> </ng-template>
    <ng-template let-i="row" datatable-cell-template>
      <div (click)="nav('pr-program/'+i.Id,'forward')" class="col-date cell">
        {{i.FromDate | date: 'dd/MM/yyyy'}} -> {{i.ToDate | date: 'dd/MM/yyyy'}}
      </div>
    </ng-template>
  </datatable-column>

  <datatable-column class="col-status cell" name="Status" property="Status">
    <ng-template datatable-filter-template>
      <select
        (change)="refresh()"
        class="c-input c-dropdown"
        [ngModelOptions]="{standalone: true}"
        [(ngModel)]="query.Status"
        [ngClass]="{active: query.Status}"
      >
        <option value="">{{'All' | translate}}</option>
        <option disabled value="">----------</option>
        <option *ngFor="let t of statusList" [value]="t.Code">{{t.Name}}</option>
      </select>
    </ng-template>
    <ng-template let-i="row" datatable-cell-template>
      <div (click)="nav('pr-program/'+i.Id,'forward')" class="col-status cell">{{i.Status}}</div>
    </ng-template>
  </datatable-column>

</app-data-table>

  <ion-infinite-scroll
    color="primary"
    threshold="20%"
    (ionInfinite)="loadData($event)"
    [disabled]="!pageConfig.infiniteScroll || pageConfig.isEndOfData"
  >
    <ion-infinite-scroll-content loadingSpinner="dots"></ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>
